(()=>{"use strict";function t(t){var e=new Map;return t.forEach((function(t){var n=function(t){var e=new Date(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-e.getDay()),e}(t.date),r=n.toISOString();e.has(r)||e.set(r,{date:n,value:0,target:null,historicalValue:null,count:0});var i=e.get(r);i.value+=t.value,t.target&&(i.target=(i.target||0)+t.target),t.historicalValue&&(i.historicalValue=(i.historicalValue||0)+t.historicalValue),i.count++})),Array.from(e.values()).map((function(t){return{date:t.date,value:t.value/t.count,target:t.target?t.target/t.count:null,historicalValue:t.historicalValue?t.historicalValue/t.count:null}})).sort((function(t,e){return t.date-e.date}))}function e(t){var e;if(!t||0===t.length)return{};var n=t[t.length-1].value,r=null===(e=t[t.length-2])||void 0===e?void 0:e.value,i=t[t.length-1].historicalValue,a=function(t){var e;if(!t||0===t.length)return null;var n=new Date(t[t.length-1].date),r=t[t.length-1].value,i=new Date(n.getFullYear(),n.getMonth(),1),a=null===(e=t.find((function(t){return new Date(t.date)>=i})))||void 0===e?void 0:e.historicalValue;return a?(r-a)/a*100:null}(t),o=function(t){var e;if(!t||0===t.length)return null;var n=new Date(t[t.length-1].date),r=t[t.length-1].value,i=Math.floor(n.getMonth()/3),a=new Date(n.getFullYear(),3*i,1),o=null===(e=t.find((function(t){return new Date(t.date)>=a})))||void 0===e?void 0:e.historicalValue;return o?(r-o)/o*100:null}(t),u=function(t){var e;if(!t||0===t.length)return null;var n=new Date(t[t.length-1].date),r=t[t.length-1].value,i=new Date(n.getFullYear(),0,1),a=null===(e=t.find((function(t){return new Date(t.date)>=i})))||void 0===e?void 0:e.historicalValue;return a?(r-a)/a*100:null}(t);return{weekOverWeek:r?(n-r)/r*100:null,yearOverYear:i?(n-i)/i*100:null,monthToDate:a,quarterToDate:o,yearToDate:u}}function n(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function r(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i(t){let e,i,o;function u(t,n,r=0,a=t.length){if(r<a){if(0!==e(n,n))return a;do{const e=r+a>>>1;i(t[e],n)<0?r=e+1:a=e}while(r<a)}return r}return 2!==t.length?(e=n,i=(e,r)=>n(t(e),r),o=(e,n)=>t(e)-n):(e=t===n||t===r?t:a,i=t,o=t),{left:u,center:function(t,e,n=0,r=t.length){const i=u(t,e,n,r-1);return i>n&&o(t[i-1],e)>-o(t[i],e)?i-1:i},right:function(t,n,r=0,a=t.length){if(r<a){if(0!==e(n,n))return a;do{const e=r+a>>>1;i(t[e],n)<=0?r=e+1:a=e}while(r<a)}return r}}}function a(){return 0}const o=Math.sqrt(50),u=Math.sqrt(10),l=Math.sqrt(2);function c(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=o?10:a>=u?5:a>=l?2:1;let f,h,g;return i<0?(g=Math.pow(10,-i)/s,f=Math.round(t*g),h=Math.round(e*g),f/g<t&&++f,h/g>e&&--h,g=-g):(g=Math.pow(10,i)*s,f=Math.round(t/g),h=Math.round(e/g),f*g<t&&++f,h*g>e&&--h),h<f&&.5<=n&&n<2?c(t,e,2*n):[f,h,g]}function s(t,e,n){return c(t=+t,e=+e,n=+n)[2]}function f(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?s(e,t,n):s(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}const h=1e3,g=6e4,d=36e5,p=864e5,y=6048e5,m=2592e6,v=31536e6,w=new Date,M=new Date;function b(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;let u;do{o.push(u=new Date(+n)),e(n,a),t(n)}while(u<n&&n<r);return o},i.filter=n=>b((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(w.setTime(+e),M.setTime(+r),t(w),t(M),Math.floor(n(w,M))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const x=b((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));x.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?b((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):x:null);x.range;const T=b((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*h)}),((t,e)=>(e-t)/h),(t=>t.getUTCSeconds())),D=(T.range,b((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*h)}),((t,e)=>{t.setTime(+t+e*g)}),((t,e)=>(e-t)/g),(t=>t.getMinutes()))),$=(D.range,b((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*g)}),((t,e)=>(e-t)/g),(t=>t.getUTCMinutes()))),C=($.range,b((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*h-t.getMinutes()*g)}),((t,e)=>{t.setTime(+t+e*d)}),((t,e)=>(e-t)/d),(t=>t.getHours()))),_=(C.range,b((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*d)}),((t,e)=>(e-t)/d),(t=>t.getUTCHours()))),k=(_.range,b((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*g)/p),(t=>t.getDate()-1))),U=(k.range,b((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/p),(t=>t.getUTCDate()-1))),N=(U.range,b((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/p),(t=>Math.floor(t/p))));N.range;function S(t){return b((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*g)/y))}const F=S(0),A=S(1),H=S(2),Y=S(3),V=S(4),O=S(5),j=S(6);F.range,A.range,H.range,Y.range,V.range,O.range,j.range;function L(t){return b((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/y))}const E=L(0),q=L(1),P=L(2),z=L(3),W=L(4),I=L(5),R=L(6),Z=(E.range,q.range,P.range,z.range,W.range,I.range,R.range,b((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()))),G=(Z.range,b((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()))),Q=(G.range,b((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear())));Q.every=t=>isFinite(t=Math.floor(t))&&t>0?b((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;Q.range;const X=b((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));X.every=t=>isFinite(t=Math.floor(t))&&t>0?b((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;X.range;function J(t,e,n,r,a,o){const u=[[T,1,h],[T,5,5e3],[T,15,15e3],[T,30,3e4],[o,1,g],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,d],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,p],[r,2,1728e5],[n,1,y],[e,1,m],[e,3,7776e6],[t,1,v]];function l(e,n,r){const a=Math.abs(n-e)/r,o=i((([,,t])=>t)).right(u,a);if(o===u.length)return t.every(f(e/v,n/v,r));if(0===o)return x.every(Math.max(f(e,n,r),1));const[l,c]=u[a/u[o-1][2]<u[o][2]/a?o-1:o];return l.every(c)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:l(t,e,n),a=i?i.range(t,+e+1):[];return r?a.reverse():a},l]}const[B,K]=J(X,G,E,N,_,$),[tt,et]=J(Q,Z,F,k,C,D);function nt(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function rt(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function it(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var at,ot,ut={"-":"",_:" ",0:"0"},lt=/^\s*\d+/,ct=/^%/,st=/[\\^$*+?|[\]().{}]/g;function ft(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function ht(t){return t.replace(st,"\\$&")}function gt(t){return new RegExp("^(?:"+t.map(ht).join("|")+")","i")}function dt(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function pt(t,e,n){var r=lt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function yt(t,e,n){var r=lt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function mt(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function vt(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function wt(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Mt(t,e,n){var r=lt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function bt(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tt(t,e,n){var r=lt.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Dt(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $t(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ct(t,e,n){var r=lt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function _t(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function kt(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ut(t,e,n){var r=lt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nt(t,e,n){var r=lt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function St(t,e,n){var r=lt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ft(t,e,n){var r=ct.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function At(t,e,n){var r=lt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ht(t,e,n){var r=lt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Yt(t,e){return ft(t.getDate(),e,2)}function Vt(t,e){return ft(t.getHours(),e,2)}function Ot(t,e){return ft(t.getHours()%12||12,e,2)}function jt(t,e){return ft(1+k.count(Q(t),t),e,3)}function Lt(t,e){return ft(t.getMilliseconds(),e,3)}function Et(t,e){return Lt(t,e)+"000"}function qt(t,e){return ft(t.getMonth()+1,e,2)}function Pt(t,e){return ft(t.getMinutes(),e,2)}function zt(t,e){return ft(t.getSeconds(),e,2)}function Wt(t){var e=t.getDay();return 0===e?7:e}function It(t,e){return ft(F.count(Q(t)-1,t),e,2)}function Rt(t){var e=t.getDay();return e>=4||0===e?V(t):V.ceil(t)}function Zt(t,e){return t=Rt(t),ft(V.count(Q(t),t)+(4===Q(t).getDay()),e,2)}function Gt(t){return t.getDay()}function Qt(t,e){return ft(A.count(Q(t)-1,t),e,2)}function Xt(t,e){return ft(t.getFullYear()%100,e,2)}function Jt(t,e){return ft((t=Rt(t)).getFullYear()%100,e,2)}function Bt(t,e){return ft(t.getFullYear()%1e4,e,4)}function Kt(t,e){var n=t.getDay();return ft((t=n>=4||0===n?V(t):V.ceil(t)).getFullYear()%1e4,e,4)}function te(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ft(e/60|0,"0",2)+ft(e%60,"0",2)}function ee(t,e){return ft(t.getUTCDate(),e,2)}function ne(t,e){return ft(t.getUTCHours(),e,2)}function re(t,e){return ft(t.getUTCHours()%12||12,e,2)}function ie(t,e){return ft(1+U.count(X(t),t),e,3)}function ae(t,e){return ft(t.getUTCMilliseconds(),e,3)}function oe(t,e){return ae(t,e)+"000"}function ue(t,e){return ft(t.getUTCMonth()+1,e,2)}function le(t,e){return ft(t.getUTCMinutes(),e,2)}function ce(t,e){return ft(t.getUTCSeconds(),e,2)}function se(t){var e=t.getUTCDay();return 0===e?7:e}function fe(t,e){return ft(E.count(X(t)-1,t),e,2)}function he(t){var e=t.getUTCDay();return e>=4||0===e?W(t):W.ceil(t)}function ge(t,e){return t=he(t),ft(W.count(X(t),t)+(4===X(t).getUTCDay()),e,2)}function de(t){return t.getUTCDay()}function pe(t,e){return ft(q.count(X(t)-1,t),e,2)}function ye(t,e){return ft(t.getUTCFullYear()%100,e,2)}function me(t,e){return ft((t=he(t)).getUTCFullYear()%100,e,2)}function ve(t,e){return ft(t.getUTCFullYear()%1e4,e,4)}function we(t,e){var n=t.getUTCDay();return ft((t=n>=4||0===n?W(t):W.ceil(t)).getUTCFullYear()%1e4,e,4)}function Me(){return"+0000"}function be(){return"%"}function xe(t){return+t}function Te(t){return Math.floor(+t/1e3)}at=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,l=t.shortMonths,c=gt(i),s=dt(i),f=gt(a),h=dt(a),g=gt(o),d=dt(o),p=gt(u),y=dt(u),m=gt(l),v=dt(l),w={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:Yt,e:Yt,f:Et,g:Jt,G:Kt,H:Vt,I:Ot,j:jt,L:Lt,m:qt,M:Pt,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:xe,s:Te,S:zt,u:Wt,U:It,V:Zt,w:Gt,W:Qt,x:null,X:null,y:Xt,Y:Bt,Z:te,"%":be},M={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:ee,e:ee,f:oe,g:me,G:we,H:ne,I:re,j:ie,L:ae,m:ue,M:le,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:xe,s:Te,S:ce,u:se,U:fe,V:ge,w:de,W:pe,x:null,X:null,y:ye,Y:ve,Z:Me,"%":be},b={a:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return D(t,e,n,r)},d:$t,e:$t,f:St,g:bt,G:Mt,H:_t,I:_t,j:Ct,L:Nt,m:Dt,M:kt,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=s.get(r[0].toLowerCase()),n+r[0].length):-1},q:Tt,Q:At,s:Ht,S:Ut,u:yt,U:mt,V:vt,w:pt,W:wt,x:function(t,e,r){return D(t,n,e,r)},X:function(t,e,n){return D(t,r,e,n)},y:bt,Y:Mt,Z:xt,"%":Ft};function x(t,e){return function(n){var r,i,a,o=[],u=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===t.charCodeAt(u)&&(o.push(t.slice(l,u)),null!=(i=ut[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),l=u+1);return o.push(t.slice(l,u)),o.join("")}}function T(t,e){return function(n){var r,i,a=it(1900,void 0,1);if(D(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=rt(it(a.y,0,1))).getUTCDay(),r=i>4||0===i?q.ceil(r):q(r),r=U.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=nt(it(a.y,0,1))).getDay(),r=i>4||0===i?A.ceil(r):A(r),r=k.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?rt(it(a.y,0,1)).getUTCDay():nt(it(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,rt(a)):nt(a)}}function D(t,e,n,r){for(var i,a,o=0,u=e.length,l=n.length;o<u;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=b[i in ut?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return w.x=x(n,w),w.X=x(r,w),w.c=x(e,w),M.x=x(n,M),M.X=x(r,M),M.c=x(e,M),{format:function(t){var e=x(t+="",w);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",M);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ot=at.format,at.parse,at.utcFormat,at.utcParse;const De=i(n),$e=De.right,Ce=(De.left,i((function(t){return null===t?NaN:+t})).center,$e);function _e(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ke(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ue(){}var Ne=.7,Se=1/Ne,Fe="\\s*([+-]?\\d+)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ye=/^#([0-9a-f]{3,8})$/,Ve=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),Oe=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),je=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${Ae}\\)$`),Le=new RegExp(`^rgba\\(${He},${He},${He},${Ae}\\)$`),Ee=new RegExp(`^hsl\\(${Ae},${He},${He}\\)$`),qe=new RegExp(`^hsla\\(${Ae},${He},${He},${Ae}\\)$`),Pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ze(){return this.rgb().formatHex()}function We(){return this.rgb().formatRgb()}function Ie(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ye.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Re(e):3===n?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ze(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ze(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ve.exec(t))?new Qe(e[1],e[2],e[3],1):(e=Oe.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=je.exec(t))?Ze(e[1],e[2],e[3],e[4]):(e=Le.exec(t))?Ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ee.exec(t))?en(e[1],e[2]/100,e[3]/100,1):(e=qe.exec(t))?en(e[1],e[2]/100,e[3]/100,e[4]):Pe.hasOwnProperty(t)?Re(Pe[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Re(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function Ze(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qe(t,e,n,r)}function Ge(t,e,n,r){return 1===arguments.length?((i=t)instanceof Ue||(i=Ie(i)),i?new Qe((i=i.rgb()).r,i.g,i.b,i.opacity):new Qe):new Qe(t,e,n,null==r?1:r);var i}function Qe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Xe(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function Je(){const t=Be(this.opacity);return`${1===t?"rgb(":"rgba("}${Ke(this.r)}, ${Ke(this.g)}, ${Ke(this.b)}${1===t?")":`, ${t})`}`}function Be(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ke(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tn(t){return((t=Ke(t))<16?"0":"")+t.toString(16)}function en(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rn(t,e,n,r)}function nn(t){if(t instanceof rn)return new rn(t.h,t.s,t.l,t.opacity);if(t instanceof Ue||(t=Ie(t)),!t)return new rn;if(t instanceof rn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,u=a-i,l=(a+i)/2;return u?(o=e===a?(n-r)/u+6*(n<r):n===a?(r-e)/u+2:(e-n)/u+4,u/=l<.5?a+i:2-a-i,o*=60):u=l>0&&l<1?0:o,new rn(o,u,l,t.opacity)}function rn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function an(t){return(t=(t||0)%360)<0?t+360:t}function on(t){return Math.max(0,Math.min(1,t||0))}function un(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ln(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}_e(Ue,Ie,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ze,formatHex:ze,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nn(this).formatHsl()},formatRgb:We,toString:We}),_e(Qe,Ge,ke(Ue,{brighter(t){return t=null==t?Se:Math.pow(Se,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ne:Math.pow(Ne,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qe(Ke(this.r),Ke(this.g),Ke(this.b),Be(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xe,formatHex:Xe,formatHex8:function(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Je,toString:Je})),_e(rn,(function(t,e,n,r){return 1===arguments.length?nn(t):new rn(t,e,n,null==r?1:r)}),ke(Ue,{brighter(t){return t=null==t?Se:Math.pow(Se,t),new rn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ne:Math.pow(Ne,t),new rn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Qe(un(t>=240?t-240:t+120,i,r),un(t,i,r),un(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rn(an(this.h),on(this.s),on(this.l),Be(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Be(this.opacity);return`${1===t?"hsl(":"hsla("}${an(this.h)}, ${100*on(this.s)}%, ${100*on(this.l)}%${1===t?")":`, ${t})`}`}}));const cn=t=>()=>t;function sn(t,e){return function(n){return t+n*e}}function fn(t){return 1==(t=+t)?hn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):cn(isNaN(e)?n:e)}}function hn(t,e){var n=e-t;return n?sn(t,n):cn(isNaN(t)?e:t)}const gn=function t(e){var n=fn(e);function r(t,e){var r=n((t=Ge(t)).r,(e=Ge(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=hn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function dn(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Ge(e[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=t(a),o=t(o),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=u(t),r+""}}}dn((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,u=r<e-1?t[r+2]:2*a-i;return ln((n-r/e)*e,o,i,a,u)}})),dn((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],u=t[(r+2)%e];return ln((n-r/e)*e,i,a,o,u)}}));function pn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Tn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function yn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function mn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Tn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var wn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mn=new RegExp(wn.source,"g");function bn(t,e){var n,r,i,a=wn.lastIndex=Mn.lastIndex=0,o=-1,u=[],l=[];for(t+="",e+="";(n=wn.exec(t))&&(r=Mn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,l.push({i:o,x:mn(n,r)})),a=Mn.lastIndex;return a<e.length&&(i=e.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)u[(n=l[r]).i]=n.x(t);return u.join("")})}function xn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function Tn(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?cn(e):("number"===i?mn:"string"===i?(n=Ie(e))?(e=n,gn):bn:e instanceof Ie?gn:e instanceof Date?yn:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?pn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?vn:mn:xn))(t,e)}function Dn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function $n(t){return+t}var Cn=[0,1];function _n(t){return t}function kn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Un(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=kn(i,r),a=n(o,a)):(r=kn(r,i),a=n(a,o)),function(t){return a(r(t))}}function Nn(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=kn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=Ce(t,e,1,r)-1;return a[n](i[n](e))}}function Sn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Fn(){var t,e,n,r,i,a,o=Cn,u=Cn,l=Tn,c=_n;function s(){var t=Math.min(o.length,u.length);return c!==_n&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?Nn:Un,i=a=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),u,l)))(t(c(e)))}return f.invert=function(n){return c(e((a||(a=r(u,o.map(t),mn)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,$n),s()):o.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),s()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),l=Dn,s()},f.clamp=function(t){return arguments.length?(c=!!t||_n,s()):c!==_n},f.interpolate=function(t){return arguments.length?(l=t,s()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,s()}}function An(){return Fn()(_n,_n)}function Hn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Yn(t){return new Date(t)}function Vn(t){return t instanceof Date?+t:+new Date(+t)}function On(t,e,n,r,i,a,o,u,l,c){var s=An(),f=s.invert,h=s.domain,g=c(".%L"),d=c(":%S"),p=c("%I:%M"),y=c("%I %p"),m=c("%a %d"),v=c("%b %d"),w=c("%B"),M=c("%Y");function b(t){return(l(t)<t?g:u(t)<t?d:o(t)<t?p:a(t)<t?y:r(t)<t?i(t)<t?m:v:n(t)<t?w:M)(t)}return s.invert=function(t){return new Date(f(t))},s.domain=function(t){return arguments.length?h(Array.from(t,Vn)):h().map(Yn)},s.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},s.tickFormat=function(t,e){return null==e?b:c(e)},s.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}(n,t)):s},s.copy=function(){return Sn(s,On(t,e,n,r,i,a,o,u,l,c))},s}function jn(){return Hn.apply(On(tt,et,Q,Z,F,k,C,D,T,ot).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Ln,En=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qn(t){if(!(e=En.exec(t)))throw new Error("invalid format: "+t);var e;return new Pn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Pn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function zn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Wn(t){return(t=zn(Math.abs(t)))?t[1]:NaN}function In(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}qn.prototype=Pn.prototype,Pn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Rn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>In(100*t,e),r:In,s:function(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ln=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+zn(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Zn(t){return t}var Gn,Qn,Xn,Jn=Array.prototype.map,Bn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Kn(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Zn:(e=Jn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,u=e[0],l=0;i>0&&u>0&&(l+u+1>r&&(u=Math.max(1,r-l)),a.push(t.substring(i-=u,i+u)),!((l+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?Zn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Jn.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=qn(t)).fill,n=t.align,f=t.sign,h=t.symbol,g=t.zero,d=t.width,p=t.comma,y=t.precision,m=t.trim,v=t.type;"n"===v?(p=!0,v="g"):Rn[v]||(void 0===y&&(y=12),m=!0,v="g"),(g||"0"===e&&"="===n)&&(g=!0,e="0",n="=");var w="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",M="$"===h?a:/[%p]/.test(v)?l:"",b=Rn[v],x=/[defgprs%]/.test(v);function T(t){var i,a,l,h=w,T=M;if("c"===v)T=b(t)+T,t="";else{var D=(t=+t)<0||1/t<0;if(t=isNaN(t)?s:b(Math.abs(t),y),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),D&&0==+t&&"+"!==f&&(D=!1),h=(D?"("===f?f:c:"-"===f||"("===f?"":f)+h,T=("s"===v?Bn[8+Ln/3]:"")+T+(D&&"("===f?")":""),x)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){T=(46===l?o+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}p&&!g&&(t=r(t,1/0));var $=h.length+t.length+T.length,C=$<d?new Array(d-$+1).join(e):"";switch(p&&g&&(t=r(C+t,C.length?d-T.length:1/0),C=""),n){case"<":t=h+t+T+C;break;case"=":t=h+C+t+T;break;case"^":t=C.slice(0,$=C.length>>1)+h+t+T+C.slice($);break;default:t=C+h+t+T}return u(t)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),T.toString=function(){return t+""},T}return{format:f,formatPrefix:function(t,e){var n=f(((t=qn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Wn(e)/3))),i=Math.pow(10,-r),a=Bn[8+r/3];return function(t){return n(i*t)+a}}}}function tr(t,e,n,r){var i,a=f(t,e,n);switch((r=qn(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Wn(e)/3)))-Wn(Math.abs(t)))}(a,o))||(r.precision=i),Xn(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Wn(e)-Wn(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Wn(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Qn(r)}function er(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,a,o]=r?c(e,t,n):c(t,e,n);if(!(a>=i))return[];const u=a-i+1,l=new Array(u);if(r)if(o<0)for(let t=0;t<u;++t)l[t]=(a-t)/-o;else for(let t=0;t<u;++t)l[t]=(a-t)*o;else if(o<0)for(let t=0;t<u;++t)l[t]=(i+t)/-o;else for(let t=0;t<u;++t)l[t]=(i+t)*o;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return tr(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,u=a.length-1,l=a[o],c=a[u],f=10;for(c<l&&(i=l,l=c,c=i,i=o,o=u,u=i);f-- >0;){if((i=s(l,c,n))===r)return a[o]=l,a[u]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function nr(){var t=An();return t.copy=function(){return Sn(t,nr())},Hn.apply(t,arguments),er(t)}!function(t){Gn=Kn(t),Qn=Gn.format,Xn=Gn.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});Array.prototype.slice;function rr(t){return function(){return t}}function ir(t){this._context=t}function ar(t){return new ir(t)}ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const or=Math.PI,ur=2*or,lr=1e-6,cr=ur-lr;function sr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class fr{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?sr:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sr;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,u=n-t,l=r-e,c=a-t,s=o-e,f=c*c+s*s;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>lr)if(Math.abs(s*u-l*c)>lr&&i){let h=n-a,g=r-o,d=u*u+l*l,p=h*h+g*g,y=Math.sqrt(d),m=Math.sqrt(f),v=i*Math.tan((or-Math.acos((d+f-p)/(2*y*m)))/2),w=v/m,M=v/y;Math.abs(w-1)>lr&&this._append`L${t+w*c},${e+w*s}`,this._append`A${i},${i},0,0,${+(s*h>c*g)},${this._x1=t+M*u},${this._y1=e+M*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),u=n*Math.sin(r),l=t+o,c=e+u,s=1^a,f=a?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>lr||Math.abs(this._y1-c)>lr)&&this._append`L${l},${c}`,n&&(f<0&&(f=f%ur+ur),f>cr?this._append`A${n},${n},0,1,${s},${t-o},${e-u}A${n},${n},0,1,${s},${this._x1=l},${this._y1=c}`:f>lr&&this._append`A${n},${n},0,${+(f>=or)},${s},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function hr(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new fr(e)}function gr(t){return t[0]}function dr(t){return t[1]}function pr(t,e){var n=rr(!0),r=null,i=ar,a=null,o=hr(u);function u(u){var l,c,s,f=(u=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(u)).length,h=!1;for(null==r&&(a=i(s=o())),l=0;l<=f;++l)!(l<f&&n(c=u[l],l,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(c,l,u),+e(c,l,u));if(s)return a=null,s+""||null}return t="function"==typeof t?t:void 0===t?gr:rr(t),e="function"==typeof e?e:void 0===e?dr:rr(e),u.x=function(e){return arguments.length?(t="function"==typeof e?e:rr(+e),u):t},u.y=function(t){return arguments.length?(e="function"==typeof t?t:rr(+t),u):e},u.defined=function(t){return arguments.length?(n="function"==typeof t?t:rr(!!t),u):n},u.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),u):i},u.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),u):r},u}Math.abs,Math.atan2;const yr=Math.cos,mr=(Math.max,Math.min,Math.sin),vr=Math.sqrt,wr=Math.PI,Mr=2*wr;vr(3);const br={draw(t,e){const n=vr(e/wr);t.moveTo(n,0),t.arc(0,0,n,0,Mr)}},xr=(vr(1/3),mr(wr/10)/mr(7*wr/10)),Tr=(mr(Mr/10),yr(Mr/10),vr(3)),Dr={draw(t,e){const n=-vr(e/(3*Tr));t.moveTo(0,2*n),t.lineTo(-Tr*n,-n),t.lineTo(Tr*n,-n),t.closePath()}};vr(3),vr(3),vr(12);function $r(t){return t}var Cr=1e-6;function _r(t){return"translate("+t+",0)"}function kr(t){return"translate(0,"+t+")"}function Ur(t){return e=>+t(e)}function Nr(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Sr(){return!this.__axis}function Fr(t,e){var n=[],r=null,i=null,a=6,o=6,u=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,s=4===t||2===t?"x":"y",f=1===t||3===t?_r:kr;function h(h){var g=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):$r:i,p=Math.max(a,0)+u,y=e.range(),m=+y[0]+l,v=+y[y.length-1]+l,w=(e.bandwidth?Nr:Ur)(e.copy(),l),M=h.selection?h.selection():h,b=M.selectAll(".domain").data([null]),x=M.selectAll(".tick").data(g,e).order(),T=x.exit(),D=x.enter().append("g").attr("class","tick"),$=x.select("line"),C=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(D),$=$.merge(D.append("line").attr("stroke","currentColor").attr(s+"2",c*a)),C=C.merge(D.append("text").attr("fill","currentColor").attr(s,c*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==M&&(b=b.transition(h),x=x.transition(h),$=$.transition(h),C=C.transition(h),T=T.transition(h).attr("opacity",Cr).attr("transform",(function(t){return isFinite(t=w(t))?f(t+l):this.getAttribute("transform")})),D.attr("opacity",Cr).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:w(t))+l)}))),T.remove(),b.attr("d",4===t||2===t?o?"M"+c*o+","+m+"H"+l+"V"+v+"H"+c*o:"M"+l+","+m+"V"+v:o?"M"+m+","+c*o+"V"+l+"H"+v+"V"+c*o:"M"+m+","+l+"H"+v),x.attr("opacity",1).attr("transform",(function(t){return f(w(t)+l)})),$.attr(s+"2",c*a),C.attr(s,c*p).text(d),M.filter(Sr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),M.each((function(){this.__axis=w}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(u=+t,h):u},h.offset=function(t){return arguments.length?(l=+t,h):l},h}function Ar(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Hr(t,e,n){t.selectAll("svg").remove();var r=40,i=20,a=50,o=60,u=t.node().offsetWidth-o-i,l=400-r-a,c=t.append("svg").attr("width",u+o+i).attr("height",l+r+a).append("g").attr("transform","translate(".concat(o,",").concat(r,")"));n.graphNumber&&c.append("text").attr("x",-o).attr("y",-r/2).attr("class","graph-number").text("Graph ".concat(n.graphNumber));var s=jn().domain(function(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let a of t)null!=(a=e(a,++i,t))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}(e,(function(t){return t.date}))).range([0,u]),f=nr().domain([0,Ar(e,(function(t){return Math.max(t.value,t.target||0,t.historicalValue||0)}))]).range([l,0]).nice();!function(t,e,n,r,i){var a=(o=e,Fr(3,o)).ticks(i.isWeeklyView?6:12).tickFormat(ot(i.isWeeklyView?"%m/%d":"%b %Y"));var o;t.append("g").attr("transform","translate(0,".concat(r,")")).call(a),t.append("g").call(function(t){return Fr(4,t)}(n))}(c,s,f,l,n),function(t,e,n,r,i){var a=pr().x((function(t){return n(t.date)})).y((function(t){return r(t.value)}));t.append("path").datum(e).attr("class","main-line").attr("fill","none").attr("stroke",i.lineColor||"#3366CC").attr("stroke-width",2).attr("d",a)}(c,e,s,f,n),n.showHistorical&&function(t,e,n,r,i){var a=pr().defined((function(t){return null!=t.historicalValue})).x((function(t){return n(t.date)})).y((function(t){return r(t.historicalValue)}));t.append("path").datum(e.filter((function(t){return null!=t.historicalValue}))).attr("class","historical-line").attr("fill","none").attr("stroke",i.historicalLineColor||"#FF9999").attr("stroke-width",2).attr("stroke-dasharray","4,4").attr("opacity",.7).attr("d",a)}(c,e,s,f,n),n.showTargets&&function(t,e,n,r,i){var a=function(t,e){let n=null,r=hr(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:rr(t||br),e="function"==typeof e?e:rr(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:rr(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:rr(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(Dr).size(64);t.selectAll(".target-triangle").data(e.filter((function(t){return null!=t.target}))).enter().append("path").attr("class","target-triangle").attr("d",a).attr("transform",(function(t){return"translate(".concat(n(t.date),",").concat(r(t.target),")")})).attr("fill",i.targetColor||"#00AA00")}(c,e,s,f,n),function(t,e,n,r){t.selectAll(".value-label").data(e).enter().append("text").attr("class","value-label").attr("x",(function(t){return n(t.date)})).attr("y",(function(t){return r(t.value)-10})).attr("text-anchor","middle").text((function(t){return Yr(t.value)}))}(c,e,s,f)}function Yr(t){return null!=t?Qn(",.0f")(t):"N/A"}function Vr(t){return null!=t?Qn("+.1f")(t)+"%":"N/A"}function Or(t){var e=new Date(t);return e.setDate(1),e.setHours(0,0,0,0),e}function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Lr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lr(Object(n),!0).forEach((function(e){qr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=jr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}looker.plugins.visualizations.add({id:"twelve_month_graph",label:"12-Month Graph",options:{metric:{type:"string",label:"Metric",section:"Data",display:"select",values:[]},date_dimension:{type:"string",label:"Date Dimension",section:"Data",display:"select",values:[]},target_metric:{type:"string",label:"Target Metric",section:"Data",display:"select",values:[],required:!1},show_historical:{type:"boolean",label:"Show Historical Data",default:!0,section:"Display"},show_targets:{type:"boolean",label:"Show Targets",default:!0,section:"Display"},show_growth_rates:{type:"boolean",label:"Show Growth Rates",default:!0,section:"Display"},graph_number:{type:"number",label:"Graph Number",default:1,section:"Display"},line_color:{type:"string",label:"Line Color",display:"color",default:"#3366CC",section:"Style"},historical_line_color:{type:"string",label:"Historical Line Color",display:"color",default:"#FF9999",section:"Style"},target_color:{type:"string",label:"Target Color",display:"color",default:"#00AA00",section:"Style"}},create:function(t,e){t.innerHTML="",this.container=d3.select(t).append("div").attr("class","twelve-month-graph-container")},updateAsync:function(n,r,i,a,o,u){try{this.container.html("");var l=function(t,e){var n=e.fields;return t.map((function(t){var e,r,i,a;return{date:new Date(t[n.dimensions[0].name].value),value:parseFloat(t[n.measures[0].name].value)||0,target:null!==(e=t[null===(r=n.measures[1])||void 0===r?void 0:r.name])&&void 0!==e&&e.value?parseFloat(t[n.measures[1].name].value):null,historicalValue:null!==(i=t[null===(a=n.measures[2])||void 0===a?void 0:a.name])&&void 0!==i&&i.value?parseFloat(t[n.measures[2].name].value):null}}))}(n,a),c=t(l),s=new Date;s.setMonth(s.getMonth()-12);var f=c.filter((function(t){return t.date>=s})).reduce((function(t,e){var n=Or(e.date).toISOString();return t[n]||(t[n]={date:Or(e.date),value:0,target:e.target,historicalValue:e.historicalValue,count:0}),t[n].value+=e.value,t[n].count++,t}),{}),h=Object.values(f).map((function(t){return{date:t.date,value:t.value/t.count,target:t.target,historicalValue:t.historicalValue}})).sort((function(t,e){return t.date-e.date})),g=e(h);Hr(this.container,h,Er(Er({},i),{},{isWeeklyView:!1,graphNumber:i.graph_number||1}));var d={lastWeek:h[h.length-1].value,wow:g.weekOverWeek,yoy:g.yearOverYear,mtd:g.monthToDate,qtd:g.quarterToDate,ytd:g.yearToDate};!function(t,e){var n=t.append("div").attr("class","box-scores");[{label:"Last Week",value:Yr(e.lastWeek)},{label:"WoW",value:Vr(e.wow)},{label:"YoY",value:Vr(e.yoy)},{label:"MTD",value:Yr(e.mtd)},{label:"QTD",value:Yr(e.qtd)},{label:"YTD",value:Yr(e.ytd)}].forEach((function(t){var e=n.append("div").attr("class","score-item");e.append("div").attr("class","score-label").text(t.label),e.append("div").attr("class","score-value").text(t.value)}))}(this.container,d),u()}catch(t){console.error("Error in 12-Month Graph:",t),u(t)}}})})();
//# sourceMappingURL=twelve_month_graph.bundle.js.map